[uwsgi]
# Project configuration
projectname = chat-experiment
base = /home/yourusername/chat-experiment

# Application
chdir = %(base)
module = wsgi:app
pythonpath = %(base)
virtualenv = %(base)/venv

# Process management
master = true
processes = 4
threads = 2
enable-threads = true

# Networking
# Option 1: HTTP (if NOT using Nginx)
http = 0.0.0.0:5000
protocol = http

# Option 2: Socket (if using Nginx as reverse proxy)
# Uncomment these and comment out the http lines above
# socket = /tmp/chat-experiment.sock
# chmod-socket = 660
# protocol = uwsgi

# Performance
vacuum = true
die-on-term = true
buffer-size = 65535
harakiri = 300
# Increase timeout for slow LLM responses

# Logging
logto = %(base)/logs/uwsgi.log
log-maxsize = 50000000
log-backupname = %(base)/logs/uwsgi.old.log

# User/Group (change from root for security)
# uid = yourusername
# gid = yourusername

# Environment variables (load from .env file)
# Note: uWSGI doesn't auto-load .env, so either:
# 1. Set env vars in systemd service file, or
# 2. Use env-file plugin, or
# 3. Explicitly set them here:
# env = MODEL_ENDPOINT=https://...
# env = MODEL_API_VERSION=...
# Better: Use systemd EnvironmentFile

# Cleanup
pidfile = /tmp/chat-experiment.pid